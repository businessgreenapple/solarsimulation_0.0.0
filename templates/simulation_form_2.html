<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太陽光発電 経済効果シミュレーション - ステップ2</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="page-wrapper">
        <header class="main-header">
            <h1 id="form-title">太陽光発電 経済効果シミュレーション</h1>
        </header>
        
        <div class="main-layout">
            <main class="main-content">
                <div class="progress-indicator">
                    <div class="step completed" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-title">場所の選択</div>
                    </div>
                    <div class="step active" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-title">電気契約の選択</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-title">太陽電池の選択</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-title">周辺機器の選択</div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="step-number">5</div>
                        <div class="step-title">蓄電池の選択</div>
                    </div>
                    <div class="step" data-step="6">
                        <div class="step-number">6</div>
                        <div class="step-title">結果</div>
                    </div>
                </div>

                <form id="simulation-form">
                    <div class="step-content active" data-step="2">
                        <h2>ステップ 2: 電気契約の選択</h2>
                        <div class="form-group required" id="utility-group">
                            <label for="utility-company">電力会社</label>
                            <select id="utility-company" name="utilityCompany" required></select>
                            <span class="error-message" id="utility-error" style="display: none;"></span>
                        </div>
                        <div class="form-group required" id="contract-group">
                            <label for="contract-plan">契約プラン</label>
                            <select id="contract-plan" name="contractPlan" required></select>
                            <span class="error-message" id="contract-error" style="display: none;"></span>
                        </div>
                        
                        <div class="form-group required" id="usage-pattern-group">
                            <label for="usage-pattern">電気使用形態</label>
                            <select id="usage-pattern" name="usagePattern" required>
                                <option value="">使用形態を選択</option>
                                <option value="朝型">朝型</option>
                                <option value="昼型">昼型</option>
                                <option value="夜型">夜型</option>
                            </select>
                            <span class="error-message" id="usage-pattern-error" style="display: none;"></span>
                            <small style="color: #666; font-size: 0.85em;">※ ご家庭の電気使用パターンを選択してください</small>
                        </div>
                        
                        <div class="form-group" id="monthly-data-group">
                            <h3>月別電気使用量・料金</h3>
                            <p>過去1年間の電気使用量と電気料金を入力してください。<span style="color: #dc3545; font-weight: bold;">最低1ヶ月分のデータを入力し、「自動計算」ボタンをクリックしてください。</span></p>
                            <div class="monthly-data-table">
                                <div class="auto-calc-section">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <button type="button" id="auto-calculate-btn" class="btn-auto-calc">自動計算</button>
                                            <small style="color: #dc3545; font-size: 0.85em; margin-left: 10px; font-weight: bold;">※ 必須：入力済みの月のデータから他の月を自動計算します</small>
                                        </div>
                                        <button type="button" onclick="clearMonthlyData()" class="btn-clear-monthly">月別データをクリア</button>
                                    </div>
                                </div>
                                <table>
                                        <thead>
                                            <tr>
                                                <th>月</th>
                                                <th>電気使用量 (kWh)</th>
                                                <th>電気料金 (円)</th>
                                            </tr>
                                        </thead>
                                    <tbody>
                                        <tr>
                                            <td>1月</td>
                                            <td><input type="number" name="usage_jan" min="0" placeholder="例: 300"></td>
                                            <td><input type="number" name="bill_jan" min="0" placeholder="例: 8000"></td>
                                        </tr>
                                        <tr>
                                            <td>2月</td>
                                            <td><input type="number" name="usage_feb" min="0" placeholder="例: 280"></td>
                                            <td><input type="number" name="bill_feb" min="0" placeholder="例: 7500"></td>
                                        </tr>
                                        <tr>
                                            <td>3月</td>
                                            <td><input type="number" name="usage_mar" min="0" placeholder="例: 320"></td>
                                            <td><input type="number" name="bill_mar" min="0" placeholder="例: 8500"></td>
                                        </tr>
                                        <tr>
                                            <td>4月</td>
                                            <td><input type="number" name="usage_apr" min="0" placeholder="例: 350"></td>
                                            <td><input type="number" name="bill_apr" min="0" placeholder="例: 9000"></td>
                                        </tr>
                                        <tr>
                                            <td>5月</td>
                                            <td><input type="number" name="usage_may" min="0" placeholder="例: 380"></td>
                                            <td><input type="number" name="bill_may" min="0" placeholder="例: 9500"></td>
                                        </tr>
                                        <tr>
                                            <td>6月</td>
                                            <td><input type="number" name="usage_jun" min="0" placeholder="例: 420"></td>
                                            <td><input type="number" name="bill_jun" min="0" placeholder="例: 10500"></td>
                                        </tr>
                                        <tr>
                                            <td>7月</td>
                                            <td><input type="number" name="usage_jul" min="0" placeholder="例: 480"></td>
                                            <td><input type="number" name="bill_jul" min="0" placeholder="例: 12000"></td>
                                        </tr>
                                        <tr>
                                            <td>8月</td>
                                            <td><input type="number" name="usage_aug" min="0" placeholder="例: 520"></td>
                                            <td><input type="number" name="bill_aug" min="0" placeholder="例: 13000"></td>
                                        </tr>
                                        <tr>
                                            <td>9月</td>
                                            <td><input type="number" name="usage_sep" min="0" placeholder="例: 450"></td>
                                            <td><input type="number" name="bill_sep" min="0" placeholder="例: 11000"></td>
                                        </tr>
                                        <tr>
                                            <td>10月</td>
                                            <td><input type="number" name="usage_oct" min="0" placeholder="例: 380"></td>
                                            <td><input type="number" name="bill_oct" min="0" placeholder="例: 9500"></td>
                                        </tr>
                                        <tr>
                                            <td>11月</td>
                                            <td><input type="number" name="usage_nov" min="0" placeholder="例: 320"></td>
                                            <td><input type="number" name="bill_nov" min="0" placeholder="例: 8500"></td>
                                        </tr>
                                        <tr>
                                            <td>12月</td>
                                            <td><input type="number" name="usage_dec" min="0" placeholder="例: 350"></td>
                                            <td><input type="number" name="bill_dec" min="0" placeholder="例: 9000"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <span class="error-message" id="monthly-data-error" style="display: none;"></span>
                        </div>
                        
                        <div class="step-buttons">
                            <button type="button" class="btn-restart" onclick="restartSimulation()">最初に戻る</button>
                            <button type="button" class="btn-prev" onclick="history.back()">戻る</button>
                            <button type="button" class="btn-next" onclick="nextStep()">次へ</button>
                        </div>
                    </div>
                </form>
            </main>
            
            <aside class="sidebar">
                <div class="sidebar-content">
                    <h3>入力ガイド</h3>
                    <div class="guide-section">
                        <h4>ステップ2: 電気契約の選択</h4>
                        <p>現在の電気契約情報を入力してください。</p>
                        <ul>
                            <li><strong>電力会社:</strong> 契約している電力会社を選択</li>
                            <li><strong>契約プラン:</strong> 選択した電力会社のプランを選択</li>
                            <li><strong>電気使用形態:</strong> ご家庭の電気使用パターンを選択</li>
                            <li><strong>月別データ:</strong> 過去1年間の使用量と料金を入力</li>
                        </ul>
                    </div>
                    
                    <div class="guide-section">
                        <h4>電気使用形態の選び方</h4>
                        <p>ご家庭の電気使用パターンに最も近いものを選択してください。</p>
                        <ul>
                            <li><strong>朝型:</strong> 朝の時間帯に電気使用量が多い家庭</li>
                            <li><strong>昼型:</strong> 昼間の時間帯に電気使用量が多い家庭</li>
                            <li><strong>夜型:</strong> 夜の時間帯に電気使用量が多い家庭</li>
                        </ul>
                    </div>
                    
                    <div class="guide-section">
                        <h4>データの入手方法</h4>
                        <p>電気料金明細書または電力会社のウェブサイトから月別の使用量と料金を確認できます。</p>
                    </div>
                    
                    <div class="guide-section">
                        <h4>次のステップ</h4>
                        <p>電気契約の入力が完了すると、太陽電池の選択に進みます。</p>
                    </div>
                </div>
            </aside>
        </div>
    </div>
    <script src="{{ url_for('static', filename='simulation_form.js') }}"></script>
</body>
</html> 